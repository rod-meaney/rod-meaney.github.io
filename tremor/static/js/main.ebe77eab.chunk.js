(this.webpackJsonptremor=this.webpackJsonptremor||[]).push([[0],{44:function(e,t,n){e.exports=n(57)},49:function(e,t,n){},52:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(19),o=n.n(i),l=(n(49),n(40)),c=n(36),s=n(37),u=n(43),m=n(41),d=n(32),h=n(17),v=n(16),E=n(27),g=n(13);function w(e){return null!=e?e.toFixed(2):0}function f(){return window.location.origin.indexOf("3000")>-1||window.location.origin.indexOf("amazonaws.com")>-1}function p(e){var t=new Array(0),n=0,a="down";e[1][1]-e[0][1]>0&&(a="up");for(var r=2;r<e.length;r++)e[r][1]-e[r-1][1]>0?a="up":("up"===a&&(0===n||t.push(n=e[r][0]-n),n=e[r][0]),a="down");for(var i=0,o=0;o<t.length;o++)i+=t[o];return(1/(i/(1e3*t.length))).toFixed(2)}var y=function(e){var t=e.eventOr,n=e.eventMo;return r.a.createElement(E.a,null,r.a.createElement(h.a,null,r.a.createElement(h.a.Header,null,r.a.createElement(E.a.Toggle,{as:v.a,variant:"link",eventKey:"1"},"Device information")),r.a.createElement(E.a.Collapse,{eventKey:"1"},r.a.createElement(h.a.Body,null,r.a.createElement("p",null,"The below is showing your devices orientation, which is used to play this game. If the numbers are not changing as you move the device, the game will not work for you."),r.a.createElement(g.a,null,r.a.createElement(g.a.Item,null,"alpha",r.a.createElement("span",{className:"float-right"},function(){try{return w(t.alpha)}catch(e){return 0}}())),r.a.createElement(g.a.Item,null,"beta",r.a.createElement("span",{className:"float-right"},function(){try{return w(t.beta)}catch(e){return 0}}())),r.a.createElement(g.a.Item,null,"gamma",r.a.createElement("span",{className:"float-right"},function(){try{return w(t.gamma)}catch(e){return 0}}())),r.a.createElement(g.a.Item,null,"Acc X",r.a.createElement("span",{className:"float-right"},function(){try{return w(n.acceleration.x)}catch(e){return 0}}())),r.a.createElement(g.a.Item,null,"Acc Y",r.a.createElement("span",{className:"float-right"},function(){try{return w(n.acceleration.y)}catch(e){return 0}}())),r.a.createElement(g.a.Item,null,"Acc Z",r.a.createElement("span",{className:"float-right"},function(){try{return w(n.acceleration.z)}catch(e){return 0}}())),r.a.createElement(g.a.Item,null,"Acc Interval",r.a.createElement("span",{className:"float-right"},function(){try{return w(n.interval)}catch(e){return 0}}())))))))},b=n(42),O=n(22),I=function(e){var t=e.canPlay,n=e.handleOrientation,i=Object(a.useState)(r.a.createElement(O.a,{variant:"info"},"Your device needs to approve access to orientation events for this website. Click the 'Device orientation access' button.")),o=Object(b.a)(i,2),l=o[0],c=o[1],s=function(){window.DeviceOrientationEvent?"function"===typeof window.DeviceMotionEvent.requestPermission?window.DeviceOrientationEvent.requestPermission().then((function(e){"granted"===e?window.addEventListener("deviceorientation",n):c(r.a.createElement(O.a,{variant:"danger"},r.a.createElement("p",null,"You need to 'Allow' access to Motion and Orientation for this application to work. You will need to close and re-open the browser to test again.")))})):c(r.a.createElement(O.a,{variant:"warning"},r.a.createElement("p",null,"It appears your device has orientation events, please check the following."),r.a.createElement("ul",null,r.a.createElement("li",null,"The url is using https - orientation requires this;"),r.a.createElement("li",null,"Older iPhones require settings updated. Under Safari in settings is 'Motion and Orientation Access';"),r.a.createElement("li",null,"You may not be able to use the App. Some browsers have this setting even though they are not on a device with an accelerometer;")),r.a.createElement("p",null,"Testing on all devices and browsers has not been done. Feel free to raise an issue with device and browser"))):c(r.a.createElement(O.a,{variant:"danger"},r.a.createElement("p",null,"This device has no orientation event. Try another device.")))};return r.a.createElement(r.a.Fragment,null,t?"":r.a.createElement("p",null,r.a.createElement(v.a,{onClick:function(){return s()},variant:"dark"},"Device orientation access"),r.a.createElement("br",null),r.a.createElement("br",null)),t?"":l)},T=function(e){var t=e.showGraph;Object(a.useEffect)((function(){window.google.charts.load("current",{packages:["corechart","line"]})}));var n=function(e,t,n){var a=new window.google.visualization.DataTable;a.addColumn("number","Time"),a.addColumn("number",t),a.addRows(n);var r={hAxis:{title:"Time (ms)"},vAxis:{title:t}};new window.google.visualization.LineChart(document.getElementById(e)).draw(a,r)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"base_chart_x"}),r.a.createElement("div",{id:"freq_x"}),r.a.createElement("div",{id:"base_chart_y"}),r.a.createElement("div",{id:"freq_y"}),r.a.createElement("div",{id:"info"}),function(){if(t)n("base_chart_x","x",window.graphX),document.getElementById("freq_x").innerHTML=p(window.graphX),n("base_chart_y","y",window.graphY),document.getElementById("freq_y").innerHTML=p(window.graphY),document.getElementById("info").innerHTML=window.graphY.toString();else try{document.getElementById("base_chart_y").innerHTML="",document.getElementById("freq_y").innerHTML="",document.getElementById("base_chart_x").innerHTML="",document.getElementById("freq_x").innerHTML="",document.getElementById("info").innerHTML=""}catch(e){}}())},M=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleOrientation=function(e){},a.handleMotion=function(e){if(a.state.recording){var t=Date.now()-a.state.recordingStartTime;t>a.state.recordingLength?a.setState({recording:!1,showGraph:!0}):(window.graphX.push([t,e.accelerationIncludingGravity.x,e.interval]),window.graphY.push([t,e.accelerationIncludingGravity.y,e.interval]))}else a.setState({motionEvent:e,canPlay:!0})},a.startRecording=function(){window.graphX=[],window.graphY=[],a.setState({recording:!0,recordingStartTime:Date.now(),showGraph:!1})},a.buttons=function(){var e="";return a.state.canPlay&&(e=a.state.recording?"Recording":r.a.createElement(v.a,{variant:"primary",onClick:function(){return a.startRecording()}},"Start")),e},a.state={orientationEvent:null,motionEvent:null,canPlay:f(),showOrientationDisplayComponent:!0,recording:!1,recordingStartTime:null,recordingLength:4e3,showGraph:!1},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("deviceorientation",this.handleOrientation.bind(this)),window.addEventListener("devicemotion",this.handleMotion.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("deviceorientation",this.handleOrientation.bind(this)),window.removeEventListener("devicemotion",this.handleMotion.bind(this))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{bg:"light",expand:"lg"},r.a.createElement(d.a.Brand,null,"Tremor check")),r.a.createElement(h.a,null,r.a.createElement(h.a.Body,null,this.buttons(),r.a.createElement(T,{showGraph:this.state.showGraph}),r.a.createElement("p",null,r.a.createElement("br",null),r.a.createElement(I,{canPlay:this.state.canPlay,handleOrientation:this.handleOrientation.bind(this)}),this.state.showOrientationDisplayComponent&&!f()?r.a.createElement(y,{eventOr:this.state.orientationEvent,eventMo:this.state.motionEvent}):""))))}}]),n}(r.a.Component),_=n(38),k=n(5);n(52);var x=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(_.a,{basename:"/tremor"},r.a.createElement(l.a,null,r.a.createElement(k.c,null,r.a.createElement(k.a,{path:"/"},r.a.createElement(M,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(56);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.ebe77eab.chunk.js.map